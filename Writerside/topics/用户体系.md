# 用户体系


## 背景
本项目旨在实现一个多租户的物联网系统，支持不同角色和权限的用户管理。系统通过不同域名区分租户，支持多种登陆方式和多种用户等级。

## 用户体系设计

### 角色
- **超级管理员**
  - 拥有系统的全部管理权限，包括管理租户和配置系统。
  - 账号全平台唯一，租户之间不可重复

- **租户管理员**
  - 拥有独立的域名，通过域名区分租户。
  - 账号可同时存在于多个租户。
  - 可以管理租户内的用户（如移除、添加用户）。
  - 可以配置租户信息（如公司名称、公司简介等）。

- **普通用户**
  - 账号可以存在于多个租户，通过域名确定登陆的租户系统。
  - 分为不同的等级：金牌、银牌、普通，拥有不同的权限。

- **游客**
  - 分配临时游客token。
  - 可以进行有限的操作。

### 登陆方式
- **手机 + 验证码登陆**
- **手机 + 密码登陆**

### 域名与租户
- 每个租户对应一个独立的域名，通过域名确定登陆的租户系统。


## 主要操作流程
```mermaid
sequenceDiagram
  participant SuperAdmin as 超级管理员
  participant TenantAdmin as 租户管理员
  participant NormalUser as 普通用户
  participant Guest as 游客
  participant Application as 平台

%% 超级管理员操作
  SuperAdmin->>Application: 创建租户
  Application-->>SuperAdmin: 返回租户创建成功
  SuperAdmin->>Application: 分配租户管理员账号
  Application-->>SuperAdmin: 分配成功

%% 租户管理员操作
  TenantAdmin->>Application: 访问租户域名
  TenantAdmin->>Application: 登陆租户管理员账号
  Application-->>TenantAdmin: 登陆成功
  TenantAdmin->>Application: 租户配置
  TenantAdmin->>Application: 管理用户（添加/删除用户）

%% 普通用户操作
  NormalUser->>Application: 访问租户域名
  NormalUser->>Application: 提交注册请求
  Application-->>NormalUser: 注册成功
  NormalUser->>Application: 登陆系统
  Application-->>NormalUser: 登陆成功

%% 游客操作
  Guest->>Application: 点击游客访问
  Application-->>Guest: 分配临时游客token
  Guest->>Application: 使用平台
```